{% extends 'base.html' %}  {# 加载父模板 #}

{% block header %}  {# 预留头部位置 #}
<link rel="stylesheet" href="/static/css/login.css">
{% endblock header %}  

{% block title %}重置密码{% endblock title %}  {# title #}
{% block nav %}
    <!--导航栏开始-->
    <nav class="navbar-default">
        <div class="container-fluid">
            <div class="navbar-header">
                <a class="navbar-brand"><img src="/static/images/logo.jpg" alt="logo"></a>
            </div>
                {% block search %}{% endblock search %}  {# 搜索框 #}
                {% block login %}{% endblock login %}  {# 登录注册链接 #}
        </div>
    </nav>
    <!--导航栏结束-->
{% endblock nav %}

{% block content %}
<div class="form">
    <form action="" method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <div class="form-group">
          <input type="email" class="form-control" id="exampleInputEmail1" placeholder="邮箱" name="email">
          <div class="red">{{ form.email.errors.0 }}</div>
          <input type="password" class="form-control" id="exampleInputPassword1" placeholder="新密码(至少六位)" name="password">
          <div class="red">{{ form.password.errors.0 }}</div>
          <input type="text" class="form-control" name="email_code" placeholder="动态验证码">
          <div class="red">{{ form.email_code.errors.0 }}</div>
          <input type="text" placeholder="验证码(点击切换)" name="code"><img src="{{ url_for('user.get_image_code') }}" class="code" id="image_code" alt="验证码">
          <div class="red">{{ form.code.errors.0 }}</div>
      </div>
      <button type="submit" class="btn btn-primary">提交</button>
        <div class="red h3">{{ msg }}</div>
    </form>
</div>
{% endblock content %}

{% block bottom %}{% endblock bottom %}  {# 底部 #}

{% block script %}  {# js预留位置 #}
    if("{{ flag }}" == "1"){
        alert("密码重置成功，请登录");
        window.location.href = "{{ url_for('user.login') }}";
    };
{% endblock script %}